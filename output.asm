; --- Encabezado y Directivas (MASM 32-bit) ---
.386
option casemap:none
includelib \masm32\lib\kernel32.lib
include \masm32\include\masm32rt.inc
printf PROTO C : VARARG

; Las rutinas de impresi¢n se manejar n con invoke printf de masm32rt.inc

.DATA
; Variables Auxiliares (DD ?) y Constantes

; Formatos de printf para rutinas de I/O
_FMT_INT	DB "%d", 0
_FMT_FLOAT	DB "%.10f", 0
_FMT_STRING	DB "%s", 0
_PCR_PROGRAMAVALIDO_FUNCIONCOMPLEJA	DD ?
_PCV_PROGRAMAVALIDO_FUNCIONCOMPLEJA	DD ?
_VARLOCAL_PROGRAMAVALIDO_FUNCIONCOMPLEJA	DD ?
_CTE_1I	DD 1
_CTE_10_0	DD 10.0
__T1_PROGRAMAVALIDO_FUNCIONCOMPLEJA	DD ?
_A_PROGRAMAVALIDO	DD ?
_B_PROGRAMAVALIDO	DD ?
_RESULTADO_PROGRAMAVALIDO	DD ?
_CONTADOR_PROGRAMAVALIDO	DD ?
_F_PROGRAMAVALIDO	DD ?
_FVAR_PROGRAMAVALIDO	DD ?
_IVAR_PROGRAMAVALIDO	DD ?
_CTE_10I	DD 10
_CTE_20I	DD 20
_CTE_3_5	DD 3.5
_CTE_5I	DD 5
__T2_PROGRAMAVALIDO	DD ?
__T3_PROGRAMAVALIDO	DD ?
__T4_PROGRAMAVALIDO	DD ?
_CTE_6I	DD 6
__T5_PROGRAMAVALIDO	DD ?
_CTE_A_ES_MENOR	DB "A ES MENOR", 0
_CTE_B_ES_MENOR	DB "B ES MENOR", 0
_CTE_3I	DD 3
__T6_PROGRAMAVALIDO	DD ?
__T7_PROGRAMAVALIDO	DD ?
__T8_PROGRAMAVALIDO	DD ?
__T9_PROGRAMAVALIDO	DD ?
__T10_PROGRAMAVALIDO	DD ?
__T11_PROGRAMAVALIDO	DD ?
_X_PROGRAMAVALIDO_LAMBDA_ANON_1	DD ?
__T12_PROGRAMAVALIDO_LAMBDA_ANON_1	DD ?
_CTE_LAMBDA_OK	DB "LAMBDA OK", 0
_CTE_1	DD 1
_SALTO_LINEA	DB 0Dh, 0Ah, 0

; Rutinas de error de Runtime
_ERR_CAPTION	DB "Error de Ejecucion", 0
_DIV_CERO	DB "Error en runtime: Division por cero!", 0
_OVERFLOW_FLOAT	DB "Error en runtime: Overflow de flotante!", 0
_RECURSION_ERR	DB "Error en runtime: Recursion directa prohibida!", 0

.CODE
; Rutina de error para divisi¢n por cero
_RTH_DIV_CERO:
	INVOKE MessageBox, NULL, ADDR _DIV_CERO, ADDR _ERR_CAPTION, MB_OK + MB_ICONSTOP
	JMP _EXIT_PROGRAM
; Rutina de error para Overflow de flotante
_RTH_OVERFLOW_FLOAT:
	INVOKE MessageBox, NULL, ADDR _OVERFLOW_FLOAT, ADDR _ERR_CAPTION, MB_OK + MB_ICONSTOP
	JMP _EXIT_PROGRAM
; Rutina de error para recursi¢n directa
_RTH_RECURSION_DIRECTA:
	INVOKE MessageBox, NULL, ADDR _RECURSION_ERR, ADDR _ERR_CAPTION, MB_OK + MB_ICONSTOP
	JMP _EXIT_PROGRAM

_FUNCIONCOMPLEJA_PROGRAMAVALIDO PROC
	PUSH EBP
	MOV EBP, ESP

	; --- Traduccion Polaca Inversa (FUNCIONCOMPLEJA:PROGRAMAVALIDO) ---
L_1:
	; ERROR: Instruccion 'PROC_FUNCIONCOMPLEJA:PROGRAMAVALIDO' no implementada.
L_2:
	; OPERANDO OMITIDO
L_3:
	; OPERANDO OMITIDO
L_4:
	MOV EAX, _CTE_1I
	MOV _VARLOCAL_PROGRAMAVALIDO_FUNCIONCOMPLEJA, EAX
L_5:
	; OPERANDO OMITIDO
L_6:
	; OPERANDO OMITIDO
L_7:
	FLD DWORD PTR _CTE_10_0
	FSTP DWORD PTR _PCV_PROGRAMAVALIDO_FUNCIONCOMPLEJA
L_8:
	; OPERANDO OMITIDO
L_9:
	FLD DWORD PTR _PCV_PROGRAMAVALIDO_FUNCIONCOMPLEJA
	SUB ESP, 8
	FSTP QWORD PTR [ESP]
	PUSH OFFSET _FMT_FLOAT
	CALL printf
	ADD ESP, 12

	; Salto de linea forzado
	PUSH OFFSET _SALTO_LINEA
	PUSH OFFSET _FMT_STRING
	CALL printf
	ADD ESP, 8
L_10:
	; OPERANDO OMITIDO
L_11:
	; OPERANDO OMITIDO
L_12:
	MOV EAX, _VARLOCAL_PROGRAMAVALIDO_FUNCIONCOMPLEJA
	ADD EAX, _CTE_1I
	MOV __T1_PROGRAMAVALIDO_FUNCIONCOMPLEJA, EAX
L_13:
	; OPERANDO OMITIDO
L_14:
	; ASIGNACION REDUNDANTE OMITIDA (Operando no es SymbolEntry)
L_15:
	JMP _FUNCIONCOMPLEJA_PROGRAMAVALIDO_EPILOGUE
L_16:
	; ERROR: Instruccion 'ENDP_FUNCIONCOMPLEJA:PROGRAMAVALIDO' no implementada.
L_17:
	NOP ; Etiqueta de fin de bloque

	; --- Fin Traduccion Polaca Inversa ---
_FUNCIONCOMPLEJA_PROGRAMAVALIDO_EPILOGUE:
	MOV ESP, EBP
	POP EBP
	RET
_FUNCIONCOMPLEJA_PROGRAMAVALIDO ENDP

start:
	FINIT
	CALL _PROGRAMAVALIDO_PROGRAMAVALIDO
_EXIT_PROGRAM:
	INVOKE ExitProcess, 0

_PROGRAMAVALIDO_PROGRAMAVALIDO PROC
	PUSH EBP
	MOV EBP, ESP

	; --- Traduccion Polaca Inversa (PROGRAMAVALIDO:PROGRAMAVALIDO) ---
L_1:
	; OPERANDO OMITIDO
L_2:
	; OPERANDO OMITIDO
L_3:
	MOV EAX, _CTE_10I
	MOV _A_PROGRAMAVALIDO, EAX
L_4:
	; OPERANDO OMITIDO
L_5:
	; OPERANDO OMITIDO
L_6:
	MOV EAX, _CTE_20I
	MOV _B_PROGRAMAVALIDO, EAX
L_7:
	; OPERANDO OMITIDO
L_8:
	; OPERANDO OMITIDO
L_9:
	FLD DWORD PTR _CTE_3_5
	FSTP DWORD PTR _F_PROGRAMAVALIDO
L_10:
	; OPERANDO OMITIDO
L_11:
	; OPERANDO OMITIDO
L_12:
	MOV EAX, _B_PROGRAMAVALIDO
	IMUL EAX, _CTE_5I
	MOV __T2_PROGRAMAVALIDO, EAX
L_13:
	; OPERANDO OMITIDO
L_14:
	; ASIGNACION REDUNDANTE OMITIDA (Operando no es SymbolEntry)
L_15:
	; OPERANDO OMITIDO
L_16:
	; OPERANDO OMITIDO
L_17:
	MOV EAX, _A_PROGRAMAVALIDO
	ADD EAX, __T2_PROGRAMAVALIDO
	MOV __T3_PROGRAMAVALIDO, EAX
L_18:
	; OPERANDO OMITIDO
L_19:
	; ASIGNACION REDUNDANTE OMITIDA (Operando no es SymbolEntry)
L_20:
	; OPERANDO OMITIDO
L_21:
	; OPERANDO OMITIDO
L_22:
	MOV EAX, __T3_PROGRAMAVALIDO
	MOV _RESULTADO_PROGRAMAVALIDO, EAX
L_23:
	; OPERANDO OMITIDO
L_24:
	; OPERANDO OMITIDO
L_25:
	MOV EAX, _A_PROGRAMAVALIDO
	MOV _PCR_PROGRAMAVALIDO_FUNCIONCOMPLEJA, EAX
L_26:
	; OPERANDO OMITIDO
L_27:
	; OPERANDO OMITIDO
L_28:
	FLD DWORD PTR _F_PROGRAMAVALIDO
	FSTP DWORD PTR _PCV_PROGRAMAVALIDO_FUNCIONCOMPLEJA
L_29:
	; OPERANDO OMITIDO
L_30:
	CALL _FUNCIONCOMPLEJA_PROGRAMAVALIDO
L_31:
	; OPERANDO OMITIDO
L_32:
	; ASIGNACION REDUNDANTE OMITIDA (Operando no es SymbolEntry)
L_33:
	; OPERANDO OMITIDO
L_34:
	; OPERANDO OMITIDO
L_35:
	MOV EAX, _PCR_PROGRAMAVALIDO_FUNCIONCOMPLEJA
	MOV _A_PROGRAMAVALIDO, EAX
L_36:
	; OPERANDO OMITIDO
L_37:
	; OPERANDO OMITIDO
L_38:
	MOV EAX, __T4_PROGRAMAVALIDO
	MOV _RESULTADO_PROGRAMAVALIDO, EAX
L_39:
	; OPERANDO OMITIDO
L_40:
	FLD DWORD PTR _F_PROGRAMAVALIDO
	SUB ESP, 8
	FSTP QWORD PTR [ESP]
	PUSH OFFSET _FMT_FLOAT
	CALL printf
	ADD ESP, 12

	; Salto de linea forzado
	PUSH OFFSET _SALTO_LINEA
	PUSH OFFSET _FMT_STRING
	CALL printf
	ADD ESP, 8
L_41:
	; OPERANDO OMITIDO
L_42:
	; OPERANDO OMITIDO
L_43:
	MOV EAX, _CTE_10I
	MOV _A_PROGRAMAVALIDO, EAX
L_44:
	; OPERANDO OMITIDO
L_45:
	; OPERANDO OMITIDO
L_46:
	MOV EAX, _CTE_6I
	MOV _B_PROGRAMAVALIDO, EAX
L_47:
	; OPERANDO OMITIDO
L_48:
	; OPERANDO OMITIDO
L_49:
	MOV EAX, _A_PROGRAMAVALIDO
	CMP EAX, _B_PROGRAMAVALIDO
	MOV EAX, 0
	JL L_SET_1_49
	JMP L_STORE_49
L_SET_1_49:
	MOV EAX, 1
L_STORE_49:
	MOV __T5_PROGRAMAVALIDO, EAX
L_50:
	; OPERANDO OMITIDO
L_51:
	; ASIGNACION REDUNDANTE OMITIDA (Operando no es SymbolEntry)
L_52:
	; OPERANDO OMITIDO
L_53:
	; Salto si Falso (BF) a L_57
	MOV EAX, __T5_PROGRAMAVALIDO
	CMP EAX, 0
	JE L_57
L_54:
	; OPERANDO OMITIDO
L_55:
	PUSH OFFSET _CTE_A_ES_MENOR
	PUSH OFFSET _FMT_STRING
	CALL printf
	ADD ESP, 8

	; Salto de linea forzado
	PUSH OFFSET _SALTO_LINEA
	PUSH OFFSET _FMT_STRING
	CALL printf
	ADD ESP, 8
L_56:
	; Salto incondicional (BI) a L_59
	JMP L_59
L_57:
	; OPERANDO OMITIDO
L_58:
	PUSH OFFSET _CTE_B_ES_MENOR
	PUSH OFFSET _FMT_STRING
	CALL printf
	ADD ESP, 8

	; Salto de linea forzado
	PUSH OFFSET _SALTO_LINEA
	PUSH OFFSET _FMT_STRING
	CALL printf
	ADD ESP, 8
L_59:
	; OPERANDO OMITIDO
L_60:
	; OPERANDO OMITIDO
L_61:
	MOV EAX, _CTE_1I
	MOV _CONTADOR_PROGRAMAVALIDO, EAX
L_62:
	; OPERANDO OMITIDO
L_63:
	; OPERANDO OMITIDO
L_64:
	MOV EAX, _CONTADOR_PROGRAMAVALIDO
	CMP EAX, _CTE_3I
	MOV EAX, 0
	JLE L_SET_1_64
	JMP L_STORE_64
L_SET_1_64:
	MOV EAX, 1
L_STORE_64:
	MOV __T6_PROGRAMAVALIDO, EAX
L_65:
	; OPERANDO OMITIDO
L_66:
	; ASIGNACION REDUNDANTE OMITIDA (Operando no es SymbolEntry)
L_67:
	; OPERANDO OMITIDO
L_68:
	; Salto si Falso (BF) a L_80
	MOV EAX, __T6_PROGRAMAVALIDO
	CMP EAX, 0
	JE L_80
L_69:
	; OPERANDO OMITIDO
L_70:
	PUSH _CONTADOR_PROGRAMAVALIDO
	PUSH OFFSET _FMT_INT
	CALL printf
	ADD ESP, 8

	; Salto de linea forzado
	PUSH OFFSET _SALTO_LINEA
	PUSH OFFSET _FMT_STRING
	CALL printf
	ADD ESP, 8
L_71:
	; OPERANDO OMITIDO
L_72:
	; OPERANDO OMITIDO
L_73:
	MOV EAX, _CONTADOR_PROGRAMAVALIDO
	ADD EAX, _CTE_1
	MOV __T7_PROGRAMAVALIDO, EAX
L_74:
	; OPERANDO OMITIDO
L_75:
	; ASIGNACION REDUNDANTE OMITIDA (Operando no es SymbolEntry)
L_76:
	; OPERANDO OMITIDO
L_77:
	; OPERANDO OMITIDO
L_78:
	MOV EAX, __T7_PROGRAMAVALIDO
	MOV _CONTADOR_PROGRAMAVALIDO, EAX
L_79:
	; Salto incondicional (BI) a L_62
	JMP L_62
L_80:
	; OPERANDO OMITIDO
L_81:
	; OPERANDO OMITIDO
L_82:
	MOV EAX, _CTE_3I
	MOV _CONTADOR_PROGRAMAVALIDO, EAX
L_83:
	; OPERANDO OMITIDO
L_84:
	; OPERANDO OMITIDO
L_85:
	MOV EAX, _CONTADOR_PROGRAMAVALIDO
	CMP EAX, _CTE_1I
	MOV EAX, 0
	JGE L_SET_1_85
	JMP L_STORE_85
L_SET_1_85:
	MOV EAX, 1
L_STORE_85:
	MOV __T8_PROGRAMAVALIDO, EAX
L_86:
	; OPERANDO OMITIDO
L_87:
	; ASIGNACION REDUNDANTE OMITIDA (Operando no es SymbolEntry)
L_88:
	; OPERANDO OMITIDO
L_89:
	; Salto si Falso (BF) a L_101
	MOV EAX, __T8_PROGRAMAVALIDO
	CMP EAX, 0
	JE L_101
L_90:
	; OPERANDO OMITIDO
L_91:
	PUSH _CONTADOR_PROGRAMAVALIDO
	PUSH OFFSET _FMT_INT
	CALL printf
	ADD ESP, 8

	; Salto de linea forzado
	PUSH OFFSET _SALTO_LINEA
	PUSH OFFSET _FMT_STRING
	CALL printf
	ADD ESP, 8
L_92:
	; OPERANDO OMITIDO
L_93:
	; OPERANDO OMITIDO
L_94:
	MOV EAX, _CONTADOR_PROGRAMAVALIDO
	SUB EAX, _CTE_1
	MOV __T9_PROGRAMAVALIDO, EAX
L_95:
	; OPERANDO OMITIDO
L_96:
	; ASIGNACION REDUNDANTE OMITIDA (Operando no es SymbolEntry)
L_97:
	; OPERANDO OMITIDO
L_98:
	; OPERANDO OMITIDO
L_99:
	MOV EAX, __T9_PROGRAMAVALIDO
	MOV _CONTADOR_PROGRAMAVALIDO, EAX
L_100:
	; Salto incondicional (BI) a L_83
	JMP L_83
L_101:
	; OPERANDO OMITIDO
L_102:
	FILD DWORD PTR _A_PROGRAMAVALIDO
	FWAIT
	FSTP DWORD PTR __T10_PROGRAMAVALIDO
L_103:
	; OPERANDO OMITIDO
L_104:
	; ASIGNACION REDUNDANTE OMITIDA (Operando no es SymbolEntry)
L_105:
	; OPERANDO OMITIDO
L_106:
	; OPERANDO OMITIDO
L_107:
	FLD DWORD PTR _CTE_10_0
	FLD DWORD PTR __T10_PROGRAMAVALIDO
	FADD
	FSTP DWORD PTR __T11_PROGRAMAVALIDO
	; Chequeo REAL de Overflow conversion a float32
	MOV EAX, DWORD PTR __T11_PROGRAMAVALIDO
	CMP EAX, 07F800000h
	JE _RTH_OVERFLOW_FLOAT
	CMP EAX, 0FF800000h
	JE _RTH_OVERFLOW_FLOAT
L_108:
	; OPERANDO OMITIDO
L_109:
	; ASIGNACION REDUNDANTE OMITIDA (Operando no es SymbolEntry)
L_110:
	; OPERANDO OMITIDO
L_111:
	; OPERANDO OMITIDO
L_112:
	FLD DWORD PTR __T11_PROGRAMAVALIDO
	FSTP DWORD PTR _FVAR_PROGRAMAVALIDO
L_113:
	; OPERANDO OMITIDO
L_114:
	; OPERANDO OMITIDO
L_115:
	MOV EAX, _A_PROGRAMAVALIDO
	MOV _X_PROGRAMAVALIDO_LAMBDA_ANON_1, EAX
L_116:
	; OPERANDO OMITIDO
L_117:
	; OPERANDO OMITIDO
L_118:
	MOV EAX, _X_PROGRAMAVALIDO_LAMBDA_ANON_1
	CMP EAX, _CTE_10I
	MOV EAX, 0
	JE L_SET_1_118
	JMP L_STORE_118
L_SET_1_118:
	MOV EAX, 1
L_STORE_118:
	MOV __T12_PROGRAMAVALIDO_LAMBDA_ANON_1, EAX
L_119:
	; OPERANDO OMITIDO
L_120:
	; ASIGNACION REDUNDANTE OMITIDA (Operando no es SymbolEntry)
L_121:
	; OPERANDO OMITIDO
L_122:
	; Salto si Falso (BF) a L_125
	MOV EAX, __T12_PROGRAMAVALIDO_LAMBDA_ANON_1
	CMP EAX, 0
	JE L_125
L_123:
	; OPERANDO OMITIDO
L_124:
	PUSH OFFSET _CTE_LAMBDA_OK
	PUSH OFFSET _FMT_STRING
	CALL printf
	ADD ESP, 8

	; Salto de linea forzado
	PUSH OFFSET _SALTO_LINEA
	PUSH OFFSET _FMT_STRING
	CALL printf
	ADD ESP, 8
L_125:
	NOP ; Etiqueta de fin de bloque

	; --- Fin Traduccion Polaca Inversa ---
_PROGRAMAVALIDO_PROGRAMAVALIDO_EPILOGUE:
	MOV ESP, EBP
	POP EBP
	RET
_PROGRAMAVALIDO_PROGRAMAVALIDO ENDP
END start
