; --- Encabezado y Directivas (MASM 32-bit) ---
.386
option casemap:none
includelib \masm32\lib\kernel32.lib
include \masm32\include\masm32rt.inc
printf PROTO C : VARARG

; Las rutinas de impresi¢n se manejar n con invoke printf de masm32rt.inc

.DATA
; Variables Auxiliares (DD ?) y Constantes

; Formatos de printf para rutinas de I/O
_FMT_INT	DB "%d", 0
_FMT_FLOAT	DB "%.10f", 0
_FMT_STRING	DB "%s", 0
_A_PROGRAMERRORESSINTAC	DD ?
_B_PROGRAMERRORESSINTAC	DD ?
_RESULTADO_PROGRAMERRORESSINTAC	DD ?
_CTE_20I	DD 20
_CTE_3_0	DD 3.0
_PCR_PROGRAMERRORESSINTAC_FUNCIONCOMPLEJA	DD ?
_PCV_PROGRAMERRORESSINTAC_FUNCIONCOMPLEJA	DD ?
_VARLOCAL_PROGRAMERRORESSINTAC_FUNCIONCOMPLEJA	DD ?
_CTE_1I	DD 1
_CTE_10_0	DD 10.0
__T1_PROGRAMERRORESSINTAC_FUNCIONCOMPLEJA	DD ?
__T2_PROGRAMERRORESSINTAC	DD ?
_CTE_1	DD 1
_SALTO_LINEA	DB 0Dh, 0Ah, 0

; Rutinas de error de Runtime
_ERR_CAPTION	DB "Error de Ejecucion", 0
_DIV_CERO	DB "Error en runtime: Division por cero!", 0
_OVERFLOW_FLOAT	DB "Error en runtime: Overflow de flotante!", 0
_RECURSION_ERR	DB "Error en runtime: Recursion directa prohibida!", 0

.CODE
; Rutina de error para divisi¢n por cero
_RTH_DIV_CERO:
	INVOKE MessageBox, NULL, ADDR _DIV_CERO, ADDR _ERR_CAPTION, MB_OK + MB_ICONSTOP
	JMP _EXIT_PROGRAM
; Rutina de error para Overflow de flotante
_RTH_OVERFLOW_FLOAT:
	INVOKE MessageBox, NULL, ADDR _OVERFLOW_FLOAT, ADDR _ERR_CAPTION, MB_OK + MB_ICONSTOP
	JMP _EXIT_PROGRAM
; Rutina de error para recursi¢n directa
_RTH_RECURSION_DIRECTA:
	INVOKE MessageBox, NULL, ADDR _RECURSION_ERR, ADDR _ERR_CAPTION, MB_OK + MB_ICONSTOP
	JMP _EXIT_PROGRAM

_FUNCIONCOMPLEJA_PROGRAMERRORESSINTAC PROC
	PUSH EBP
	MOV EBP, ESP

	; --- Traduccion Polaca Inversa (FUNCIONCOMPLEJA:PROGRAMERRORESSINTAC) ---
L_1:
	; ERROR: Instruccion 'PROC_FUNCIONCOMPLEJA:PROGRAMERRORESSINTAC' no implementada.
L_2:
	; OPERANDO OMITIDO
L_3:
	; OPERANDO OMITIDO
L_4:
	MOV EAX, _CTE_1I
	MOV _VARLOCAL_PROGRAMERRORESSINTAC_FUNCIONCOMPLEJA, EAX
L_5:
	; OPERANDO OMITIDO
L_6:
	; OPERANDO OMITIDO
L_7:
	FLD DWORD PTR _CTE_10_0
	FSTP DWORD PTR _PCV_PROGRAMERRORESSINTAC_FUNCIONCOMPLEJA
L_8:
	; OPERANDO OMITIDO
L_9:
	FLD DWORD PTR _PCV_PROGRAMERRORESSINTAC_FUNCIONCOMPLEJA
	SUB ESP, 8
	FSTP QWORD PTR [ESP]
	PUSH OFFSET _FMT_FLOAT
	CALL printf
	ADD ESP, 12

	; Salto de linea forzado
	PUSH OFFSET _SALTO_LINEA
	PUSH OFFSET _FMT_STRING
	CALL printf
	ADD ESP, 8
L_10:
	; OPERANDO OMITIDO
L_11:
	; OPERANDO OMITIDO
L_12:
	MOV EAX, _VARLOCAL_PROGRAMERRORESSINTAC_FUNCIONCOMPLEJA
	ADD EAX, _CTE_1I
	MOV __T1_PROGRAMERRORESSINTAC_FUNCIONCOMPLEJA, EAX
L_13:
	; OPERANDO OMITIDO
L_14:
	; ASIGNACION REDUNDANTE OMITIDA (Operando no es SymbolEntry)
L_15:
	JMP _FUNCIONCOMPLEJA_PROGRAMERRORESSINTAC_EPILOGUE
L_16:
	; ERROR: Instruccion 'ENDP_FUNCIONCOMPLEJA:PROGRAMERRORESSINTAC' no implementada.
L_17:
	NOP ; Etiqueta de fin de bloque

	; --- Fin Traduccion Polaca Inversa ---
_FUNCIONCOMPLEJA_PROGRAMERRORESSINTAC_EPILOGUE:
	MOV ESP, EBP
	POP EBP
	RET
_FUNCIONCOMPLEJA_PROGRAMERRORESSINTAC ENDP

start:
	FINIT
	CALL _PROGRAMERRORESSINTAC_PROGRAMERRORESSINTAC
_EXIT_PROGRAM:
	INVOKE ExitProcess, 0

_PROGRAMERRORESSINTAC_PROGRAMERRORESSINTAC PROC
	PUSH EBP
	MOV EBP, ESP

	; --- Traduccion Polaca Inversa (PROGRAMERRORESSINTAC:PROGRAMERRORESSINTAC) ---
L_1:
	; OPERANDO OMITIDO
L_2:
	; OPERANDO OMITIDO
L_3:
	MOV EAX, _CTE_20I
	MOV _A_PROGRAMERRORESSINTAC, EAX
L_4:
	; OPERANDO OMITIDO
L_5:
	; OPERANDO OMITIDO
L_6:
	FLD DWORD PTR _CTE_3_0
	FSTP DWORD PTR _B_PROGRAMERRORESSINTAC
L_7:
	; OPERANDO OMITIDO
L_8:
	; OPERANDO OMITIDO
L_9:
	MOV EAX, _A_PROGRAMERRORESSINTAC
	MOV _PCR_PROGRAMERRORESSINTAC_FUNCIONCOMPLEJA, EAX
L_10:
	; OPERANDO OMITIDO
L_11:
	; OPERANDO OMITIDO
L_12:
	FLD DWORD PTR _B_PROGRAMERRORESSINTAC
	FSTP DWORD PTR _PCV_PROGRAMERRORESSINTAC_FUNCIONCOMPLEJA
L_13:
	; OPERANDO OMITIDO
L_14:
	CALL _FUNCIONCOMPLEJA_PROGRAMERRORESSINTAC
L_15:
	; OPERANDO OMITIDO
L_16:
	; ASIGNACION REDUNDANTE OMITIDA (Operando no es SymbolEntry)
L_17:
	; OPERANDO OMITIDO
L_18:
	; OPERANDO OMITIDO
L_19:
	MOV EAX, _PCR_PROGRAMERRORESSINTAC_FUNCIONCOMPLEJA
	MOV _A_PROGRAMERRORESSINTAC, EAX
L_20:
	; OPERANDO OMITIDO
L_21:
	; OPERANDO OMITIDO
L_22:
	MOV EAX, __T2_PROGRAMERRORESSINTAC
	MOV _RESULTADO_PROGRAMERRORESSINTAC, EAX
L_23:
	NOP ; Etiqueta de fin de bloque

	; --- Fin Traduccion Polaca Inversa ---
_PROGRAMERRORESSINTAC_PROGRAMERRORESSINTAC_EPILOGUE:
	MOV ESP, EBP
	POP EBP
	RET
_PROGRAMERRORESSINTAC_PROGRAMERRORESSINTAC ENDP
END start
