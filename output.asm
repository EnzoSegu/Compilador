; --- Encabezado y Directivas (MASM 32-bit) ---
.386
option casemap:none
includelib \masm32\lib\kernel32.lib
include \masm32\include\masm32rt.inc
printf PROTO C : VARARG

; Las rutinas de impresi칩n se manejar치n con invoke printf de masm32rt.inc

.DATA
; Variables Auxiliares (DD ?) y Constantes

; Formatos de printf para rutinas de I/O
_FMT_INT	DB "%d", 0
_FMT_FLOAT	DB "%.10f", 0
_FMT_STRING	DB "%s", 0
_A_PRUEBAINTEGRAL	DD ?
_FLOTANTE_PRUEBAINTEGRAL	DD ?
_CONTADOR_PRUEBAINTEGRAL	DD ?
_CTE_10I	DD 10
_CTE_2_5	DD 2.5
_@T1_PRUEBAINTEGRAL	DD ?
_@T2_PRUEBAINTEGRAL	DD ?
_CTE_For_Ascendente__1_to_3__	DB "For Ascendente (1 to 3):", 0
_CTE_1I	DD 1
_CTE_3I	DD 3
_@T3_PRUEBAINTEGRAL	DD ?
_@T4_PRUEBAINTEGRAL	DD ?
_CTE_For_Descendente__3_to_1__	DB "For Descendente (3 to 1):", 0
_@T5_PRUEBAINTEGRAL	DD ?
_@T6_PRUEBAINTEGRAL	DD ?
_CTE_1	DD 1
_SALTO_LINEA	DB 0Dh, 0Ah, 0

; Rutinas de error de Runtime
_ERR_CAPTION	DB "Error de Ejecucion", 0
_DIV_CERO	DB "Error en runtime: Division por cero!", 0
_OVERFLOW_FLOAT	DB "Error en runtime: Overflow de flotante!", 0
_RECURSION_ERR	DB "Error en runtime: Recursion directa prohibida!", 0

.CODE
; Rutina de error para divisi칩n por cero
_RTH_DIV_CERO:
	INVOKE MessageBox, NULL, ADDR _DIV_CERO, ADDR _ERR_CAPTION, MB_OK + MB_ICONSTOP
	JMP _EXIT_PROGRAM
; Rutina de error para Overflow de flotante
_RTH_OVERFLOW_FLOAT:
	INVOKE MessageBox, NULL, ADDR _OVERFLOW_FLOAT, ADDR _ERR_CAPTION, MB_OK + MB_ICONSTOP
	JMP _EXIT_PROGRAM
; Rutina de error para recursi칩n directa
_RTH_RECURSION_DIRECTA:
	INVOKE MessageBox, NULL, ADDR _RECURSION_ERR, ADDR _ERR_CAPTION, MB_OK + MB_ICONSTOP
	JMP _EXIT_PROGRAM

start:
	CALL _PRUEBAINTEGRAL_PRUEBAINTEGRAL
_EXIT_PROGRAM:
	INVOKE ExitProcess, 0

_PRUEBAINTEGRAL_PRUEBAINTEGRAL PROC
	PUSH EBP
	MOV EBP, ESP

	; --- Traduccion Polaca Inversa (PRUEBAINTEGRAL:PRUEBAINTEGRAL) --- 
L_1:
	; OPERANDO OMITIDO
L_2:
	; OPERANDO OMITIDO
L_3:
	MOV EAX, _CTE_10I
	MOV _A_PRUEBAINTEGRAL, EAX
L_4:
	; OPERANDO OMITIDO
L_5:
	FILD DWORD PTR _A_PRUEBAINTEGRAL
	FWAIT
	FSTP DWORD PTR _@T1_PRUEBAINTEGRAL
L_6:
	; OPERANDO OMITIDO
L_7:
	; ASIGNACION REDUNDANTE OMITIDA (Operando no es SymbolEntry)
L_8:
	; OPERANDO OMITIDO
L_9:
	; OPERANDO OMITIDO
L_10:
	FLD DWORD PTR _CTE_2_5
	FLD DWORD PTR _@T1_PRUEBAINTEGRAL
	FADD
	; Chequeo de Overflow/Underflow Flotante
	FWAIT
	FNSTSW AX
	TEST AH, 0004h
	JNE _RTH_OVERFLOW_FLOAT
	FSTP DWORD PTR _@T2_PRUEBAINTEGRAL
L_11:
	; OPERANDO OMITIDO
L_12:
	; ASIGNACION REDUNDANTE OMITIDA (Operando no es SymbolEntry)
L_13:
	; OPERANDO OMITIDO
L_14:
	; OPERANDO OMITIDO
L_15:
	FLD DWORD PTR _@T2_PRUEBAINTEGRAL
	FSTP DWORD PTR _FLOTANTE_PRUEBAINTEGRAL
L_16:
	; OPERANDO OMITIDO
L_17:
	PUSH OFFSET _CTE_For_Ascendente__1_to_3__
	PUSH OFFSET _FMT_STRING
	CALL printf
	ADD ESP, 8

	; Salto de linea forzado
	PUSH OFFSET _SALTO_LINEA
	PUSH OFFSET _FMT_STRING
	CALL printf
	ADD ESP, 8
L_18:
	; OPERANDO OMITIDO
L_19:
	; OPERANDO OMITIDO
L_20:
	MOV EAX, _CTE_1I
	MOV _CONTADOR_PRUEBAINTEGRAL, EAX
L_21:
	; OPERANDO OMITIDO
L_22:
	; OPERANDO OMITIDO
L_23:
	MOV EAX, _CONTADOR_PRUEBAINTEGRAL
	CMP EAX, _CTE_3I
	MOV EAX, 0
	JLE L_SET_1_23
	JMP L_STORE_23
L_SET_1_23:
	MOV EAX, 1
L_STORE_23:
	MOV _@T3_PRUEBAINTEGRAL, EAX
L_24:
	; OPERANDO OMITIDO
L_25:
	; ASIGNACION REDUNDANTE OMITIDA (Operando no es SymbolEntry)
L_26:
	; OPERANDO OMITIDO
L_27:
	; Salto si Falso (BF) a L_39
	MOV EAX, _@T3_PRUEBAINTEGRAL
	CMP EAX, 0
	JE L_39
L_28:
	; OPERANDO OMITIDO
L_29:
	FLD DWORD PTR _FLOTANTE_PRUEBAINTEGRAL
	SUB ESP, 8
	FSTP QWORD PTR [ESP]
	PUSH OFFSET _FMT_FLOAT
	CALL printf
	ADD ESP, 12

	; Salto de linea forzado
	PUSH OFFSET _SALTO_LINEA
	PUSH OFFSET _FMT_STRING
	CALL printf
	ADD ESP, 8
L_30:
	; OPERANDO OMITIDO
L_31:
	; OPERANDO OMITIDO
L_32:
	MOV EAX, _CONTADOR_PRUEBAINTEGRAL
	ADD EAX, _CTE_1
	MOV _@T4_PRUEBAINTEGRAL, EAX
L_33:
	; OPERANDO OMITIDO
L_34:
	; ASIGNACION REDUNDANTE OMITIDA (Operando no es SymbolEntry)
L_35:
	; OPERANDO OMITIDO
L_36:
	; OPERANDO OMITIDO
L_37:
	MOV EAX, _@T4_PRUEBAINTEGRAL
	MOV _CONTADOR_PRUEBAINTEGRAL, EAX
L_38:
	; Salto incondicional (BI) a L_21
	JMP L_21
L_39:
	; OPERANDO OMITIDO
L_40:
	PUSH OFFSET _CTE_For_Descendente__3_to_1__
	PUSH OFFSET _FMT_STRING
	CALL printf
	ADD ESP, 8

	; Salto de linea forzado
	PUSH OFFSET _SALTO_LINEA
	PUSH OFFSET _FMT_STRING
	CALL printf
	ADD ESP, 8
L_41:
	; OPERANDO OMITIDO
L_42:
	; OPERANDO OMITIDO
L_43:
	MOV EAX, _CTE_3I
	MOV _CONTADOR_PRUEBAINTEGRAL, EAX
L_44:
	; OPERANDO OMITIDO
L_45:
	; OPERANDO OMITIDO
L_46:
	MOV EAX, _CONTADOR_PRUEBAINTEGRAL
	CMP EAX, _CTE_1I
	MOV EAX, 0
	JGE L_SET_1_46
	JMP L_STORE_46
L_SET_1_46:
	MOV EAX, 1
L_STORE_46:
	MOV _@T5_PRUEBAINTEGRAL, EAX
L_47:
	; OPERANDO OMITIDO
L_48:
	; ASIGNACION REDUNDANTE OMITIDA (Operando no es SymbolEntry)
L_49:
	; OPERANDO OMITIDO
L_50:
	; Salto si Falso (BF) a L_62
	MOV EAX, _@T5_PRUEBAINTEGRAL
	CMP EAX, 0
	JE L_62
L_51:
	; OPERANDO OMITIDO
L_52:
	FLD DWORD PTR _FLOTANTE_PRUEBAINTEGRAL
	SUB ESP, 8
	FSTP QWORD PTR [ESP]
	PUSH OFFSET _FMT_FLOAT
	CALL printf
	ADD ESP, 12

	; Salto de linea forzado
	PUSH OFFSET _SALTO_LINEA
	PUSH OFFSET _FMT_STRING
	CALL printf
	ADD ESP, 8
L_53:
	; OPERANDO OMITIDO
L_54:
	; OPERANDO OMITIDO
L_55:
	MOV EAX, _CONTADOR_PRUEBAINTEGRAL
	SUB EAX, _CTE_1
	MOV _@T6_PRUEBAINTEGRAL, EAX
L_56:
	; OPERANDO OMITIDO
L_57:
	; ASIGNACION REDUNDANTE OMITIDA (Operando no es SymbolEntry)
L_58:
	; OPERANDO OMITIDO
L_59:
	; OPERANDO OMITIDO
L_60:
	MOV EAX, _@T6_PRUEBAINTEGRAL
	MOV _CONTADOR_PRUEBAINTEGRAL, EAX
L_61:
	; Salto incondicional (BI) a L_44
	JMP L_44

	; --- Fin Traduccion Polaca Inversa --- 
_PRUEBAINTEGRAL_PRUEBAINTEGRAL_EPILOGUE:
	MOV ESP, EBP
	POP EBP
	RET
_PRUEBAINTEGRAL_PRUEBAINTEGRAL ENDP
END start
